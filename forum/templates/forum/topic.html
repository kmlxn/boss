{% extends 'forum/base.html' %}

{% block jumbotron %}
<div class="message">
    <span>
        {{ topic.name }}
    </span>
</div>
{% endblock %}

{% block content %}
        <!-- <div style="float: right; margin-top: 40px;">
            {{ topic.upvotes }}
            <form method="post" style="display: inline;"
                action="{% url 'forum:vote_for_topic' topic.category.name topic.id %}">
                <input type="hidden" value="upvote" name="type">
                <input type="hidden" value="topic_page" name="referer">
                <button type="submit" class="glyphicon glyphicon-chevron-up vote-button"></button>
                {% csrf_token %}
            </form>
            <form method="post" style="display: inline"
                action="{% url 'forum:vote_for_topic' topic.category.name topic.id %}">
                <input type="hidden" value="downvote" name="type">
                <input type="hidden" value="topic_page" name="referer">
                <button type="submit" class="glyphicon glyphicon-chevron-down vote-button"></button>
                {% csrf_token %}
            </form>
            {{ topic.downvotes }}
        </div> -->
        <span style="margin-left:20px">
            <span class="vote">
                <form method="post" style="display: inline"
                    action="{% url 'forum:vote_for_topic' topic.category.name topic.id %}">
                    <input type="hidden" value="upvote" name="type">
                    <input type="hidden" value="topic_page" name="referer">
                    <button type="submit">+</button>
                    {% csrf_token %}
                </form>
                <form method="post" style="display: inline"
                    action="{% url 'forum:vote_for_topic' topic.category.name topic.id %}">
                    <input type="hidden" value="downvote" name="type">
                    <input type="hidden" value="topic_page" name="referer">
                    <button type="submit">-</button>
                    {% csrf_token %}
                </form>
            </span>
            <em>september 13 12:31</em>
        </span>

        <article>
            <div class="discussion">
                {% if topic.image %}
                    <img width="300px" src="{{ topic.image.url }}" alt="" />
                {% endif %}
                <p class="description">{{ topic.text | safe }}</p>
            </div>
        </article>
        <br>
        <hr>

        {% if comments %}
            {% for comment in comments %}
                <article>
                    <div class="discussion">
                        {% if comment.image %}
                            <img width="300px" src="{{ comment.image.url }}" alt="" />
                        {% endif %}
                        <p>{{ comment.text }}</p>
                    </div>
                </article>
                <hr>
            {% endfor %}
        {% else %}
            <p>No comments are available.</p>
        {% endif %}

<article>
        <form action="{% url 'forum:show_or_comment_topic' topic.category.name topic.id %}"
            method="post" enctype="multipart/form-data"
        >
            {% csrf_token %}
            {{ add_comment_form.comment_text }}
            <button type="submit" class="btn btn-default" style="float: right">Leave comment</button>
            <label for="image">Image</label>
            {{ add_comment_form.comment_image }}
            {{ add_comment_form.comment_captcha }}
            <div class="clearfix"></div>
        </form>

        {% if error_message %}
            <p><strong>{{ error_message }}</strong></p>
        {% endif %}
    </article>

{% endblock %}
