<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <link rel="stylesheet" type="text/css" href="/static/forum/style.css" />

    <title>localizator</title>
</head>

<body>

    <h1><a href="{% url 'forum:index' %}">Localizator</a></h1>

<div class="grid">
    <div class="col-1-8">
        <nav class="module">
            {% if categories %}
                <h3>Categories</h3>
                <ul>
                    {% for category in categories %}
                        <li>
                            <a href="{% url 'forum:show_category' category.name %}" id="{{category.name}}">
                                {{category.title}}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>No categories are available.</p>
            {% endif %}
        </nav>
    </div>
    <div class="col-7-8">
        <h1>{{ category.title }}</h1>
        {% if topics %}
            {% for topic in topics %}
                <div class="grid">
                    <div class="col-1-2">
                        <section class="module">
                            {{ topic.upvotes }}
                            <form method="post"
                                action="{% url 'forum:vote_for_topic' topic.category.name topic.id %}">
                                <input type="hidden" value="upvote" name="type">
                                <input type="hidden" value="category_page" name="referer">
                                <button type="submit" class="button button-upvote">+</button>
                                {% csrf_token %}
                            </form>
                            <form method="post"
                                action="{% url 'forum:vote_for_topic' topic.category.name topic.id %}">
                                <input type="hidden" value="downvote" name="type">
                                <input type="hidden" value="category_page" name="referer">
                                <button type="submit" class="button button-downvote">-</button>
                                {% csrf_token %}
                            </form>
                            {{ topic.downvotes }}

                            <h4><a href="{% url 'forum:show_topic' category.name topic.id %}">{{ topic.name }}</a></h4>
                            <p>{{ topic.text }}</p>
                        </section>
                    </div>
                    <div class="col-1-2">
                        {% if topic.image %}
                            <section class="module">
                                <img width="100px" src="{{ topic.image.url }}">
                            </section>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>No topics are available.</p>
        {% endif %}
        <div class="grid">
            <div class="col-1-2">
                <div class="section">
                    <form action="{% url 'forum:add_topic' category.name %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="text" name="topic_name" placeholder="Topic name" class="name">
                        <textarea name="topic_text" placeholder="Topic text"></textarea>
                        <label for="image">Image:</label>
                        <input type="file" name="image">
                        <button type="submit" class="button button-start-topic">Start new topic</button>
                    </form>
                </div>
            </div>
            <div class="col-1-2"></div>
            <b>{{ error_message }}</b>
        </div>
    </div>
</div>

</body>